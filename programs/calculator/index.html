<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Calculator</title>
    <link href="../../lib/os-gui/layout.css" rel="stylesheet" type="text/css">
    <link href="../../lib/os-gui/windows-98.css" rel="stylesheet" type="text/css">
    <link rel="icon" href="../../images/icons/calculator-16x16.png" sizes="16x16" type="image/png">
    <link rel="icon" href="../../images/icons/calculator-32x32.png" sizes="32x32" type="image/png">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <script src="../../lib/jquery.min.js"></script>
    <script src="../../lib/pep.js"></script>
    <script src="../../lib/os-gui/$MenuBar.js"></script>
    <script src="menus.js"></script>
    <link href="windows-98-calc.css" rel="stylesheet" type="text/css">
</head>

<body>

    <div class="splash">
        <div class="spinner"></div>
        <div class="msg"></div>
    </div>
    <script>
        function show(msg) {
            document.querySelector(".splash > .msg").innerHTML = msg;
        }
        function revealCalc() {
            document.querySelector(".container").style.display = "block";
            document.querySelector(".splash").style.display = "none";
        }
    </script>
    <!--TODO: is there a race condition where script.js loads too late to define initialise for engine.js to call? or is order guaranteed even with async somehow?-->
    <script async src="mcalculator/server/public/js/script.js"></script>
    <script async onload="show('loading your files<br>Please wait...');"
        src="mcalculator/server/public/js/engine.js"></script>
    <!--Ids of buttons exactly match the Command enum names of CalculationManager namespace of engine-->
    <div style="display: none;" class="container">
        <div id="calc">
            <div id="display">
                <div id="expression">expression panel</div>
                <div id="primary">0</div>
            </div>
            <div id="funcs">
                <div class="row fluid">
                    <button id="CommandMCLEAR" class="red-text disabled onmem">MC</button>
                    <button id="CommandRECALL" class="red-text disabled onmem">MR</button>
                    <button id="CommandMPLUS" class="red-text">M+</button>
                    <button id="CommandMMINUS" class="red-text">M-</button>
                    <button id="CommandSTORE" class="red-text">MS</button>
                    <button onclick="toggleMemory()" class="red-text memory disabled onmem">
                        M^
                    </button>
                </div>
            </div>
            <div id="inp">
                <div class="row fluid-yb6 fluid-x">
                    <button id="CommandPERCENT" class="blue-text">&#xE94C;</button>
                    <button id="CommandCENTR" class="red-text">CE</button>
                    <button id="CommandCLEAR" class="red-text">C</button>
                    <button id="CommandBACK" class="red-text">&#xE94F;</button>
                </div>
                <div class="row fluid-yb6 fluid-x">
                    <button id="CommandREC" class="blue-text">&#xf7c9;</button>
                    <button id="CommandSQR" class="blue-text">&#xf7c8;</button>
                    <button id="CommandSQRT" class="blue-text">&#xF899;</button>
                    <button id="CommandDIV" class="red-text">&#xE94A;</button>
                </div>
                <div class="row fluid-yb6 fluid-x">
                    <button id="Command7" class="b blue-text">7</button>
                    <button id="Command8" class="b blue-text">8</button>
                    <button id="Command9" class="b blue-text">9</button>
                    <button id="CommandMUL" class="red-text">&#xE947;</button>
                </div>
                <div class="row fluid-yb6 fluid-x">
                    <button id="Command4" class="b blue-text">4</button>
                    <button id="Command5" class="b blue-text">5</button>
                    <button id="Command6" class="b blue-text">6</button>
                    <button id="CommandSUB" class="red-text">&#xE949;</button>
                </div>
                <div class="row fluid-yb6 fluid-x">
                    <button id="Command1" class="b blue-text">1</button>
                    <button id="Command2" class="b blue-text">2</button>
                    <button id="Command3" class="b blue-text">3</button>
                    <button id="CommandADD" class="red-text">&#xE948;</button>
                </div>
                <div class="row fluid-yb6 fluid-x">
                    <button id="CommandSIGN" class="blue-text">&#xF898;</button>
                    <button id="Command0" class="b blue-text">0</button>
                    <button id="CommandPNT" class="b blue-text">.</button>
                    <button id="CommandEQU" class="red-text p">&#xE94E;</button>
                </div>
            </div>
        </div>
        <div id="sidebar">
            <div id="nav">
                <!--ids of nav math classes of panels!!!-->
                <div id="hspanel" class="nav-item active">
                    History
                    <div class="barbelow"></div>
                </div>
                <div id="mempanel" class="nav-item">
                    Memory
                    <div class="barbelow"></div>
                </div>
            </div>
            <div id="panel">
                <div class="hspanel">
                    <p>There is no history yet</p>
                    <!--buttons like this will be added dynamically-->
                    <!--
                        <button class="history-item">
                          <div class="expression"></div>
                          <div class="result"></div>
                        </button>
                        -->
                    <button style="display: none;" onclick="clearHistory()" class="del">
                        &#xE74D;
                    </button>
                </div>
                <div style="display: none;" class="mempanel">
                    <p>There's nothing saved in memory</p>
                    <button id="skel" style="display: none;" class="memory-item">
                        <div class="value">8566</div>
                        <div class="btns">
                            <div class="mp">M+</div>
                            <div class="mm">M-</div>
                            <div class="mc">MC</div>
                        </div>
                    </button>
                    <button style="display: none;" onclick="clearAllMemory()" class="del">
                        &#xE74D;
                    </button>
                </div>
            </div>
        </div>
    </div>
    <link rel="stylesheet" href="mcalculator/server/public/fonts.css" />
    <!-- <link rel="stylesheet" href="mcalculator/server/public/standard.css" /> -->
    <noscript>
        <p>Calculator requires Javascript and WebAssembly to be enabled.</p>
    </noscript>
</body>

</html>